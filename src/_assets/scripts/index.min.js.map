{"version":3,"sources":["index.js"],"names":["Menu","constructor","this","menuWrapper","document","querySelector","menuTrigger","menuLinks","querySelectorAll","init","bind","show","hide","toggle","classList","remove","add","body","style","removeProperty","contains","addEventListener","forEach","link","Tabs","element","activeClass","arguments","length","undefined","tabsRoot","tabsTrigger","tabsContent","options","update","tabId","trigger","dataset","content","Album","albumRoot","sliderRoot","albumImages","sliderImages","loacation","location","get","url","response","fetch","method","headers","ok","json","Error","status","error","album","slider","then","data","img","innerHTML","sliderAlbum","Splide","type","gap","pagination","mount","catch","Popup","onShow","onHide","popupRoot","popupTrigger","e","target","showPopup","id","hidePopup","window","modal","src","textContent","imageSrc","closest","resultsImage","pilot","num","timeSu1","timeSu2","timeSu3","timeTotal","frontAxle","backAxle","rollCage","resultsRollCage","item"],"mappings":"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","file":"index.min.js","sourcesContent":["/* global Splide */\r\n\r\nclass Menu {\r\n  constructor() {\r\n    this.menuWrapper = document.querySelector('#js-menu-wrapper');\r\n    this.menuTrigger = document.querySelector('#js-menu-trigger');\r\n\r\n    if (this.menuWrapper && this.menuTrigger) {\r\n      this.menuLinks = this.menuWrapper.querySelectorAll('.js-menu-link');\r\n\r\n      this.init = this.init.bind(this);\r\n      this.show = this.show.bind(this);\r\n      this.hide = this.hide.bind(this);\r\n      this.toggle = this.toggle.bind(this);\r\n\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  show() {\r\n    this.menuWrapper.classList.remove('is-hide');\r\n    this.menuWrapper.classList.add('is-show');\r\n    this.menuTrigger.classList.add('is-open');\r\n\r\n    document.body.style['overflow'] = 'hidden';\r\n  }\r\n\r\n  hide() {\r\n    this.menuTrigger.classList.remove('is-open');\r\n    this.menuWrapper.classList.remove('is-show');\r\n    this.menuWrapper.classList.add('is-hide');\r\n\r\n    document.body.style.removeProperty('overflow');\r\n  }\r\n\r\n  toggle() {\r\n    if (this.menuTrigger.classList.contains('is-open')) {\r\n      this.hide();\r\n    } else {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.menuTrigger.addEventListener('click', () => this.toggle());\r\n\r\n    this.menuLinks.forEach((link) => link.addEventListener('click', this.hide));\r\n  }\r\n}\r\n\r\nclass Tabs {\r\n  constructor(element, { activeClass } = {}) {\r\n    this.tabsRoot = typeof element === 'string' ? document.querySelector(element) : element;\r\n\r\n    if (this.tabsRoot) {\r\n      this.tabsTrigger = this.tabsRoot.querySelectorAll('.js-tabs-trigger');\r\n      this.tabsContent = this.tabsRoot.querySelectorAll('.js-tabs-content');\r\n\r\n      this.options = {\r\n        activeClass: activeClass || 'is-current',\r\n      };\r\n\r\n      this.update = this.update.bind(this);\r\n\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  update(tabId) {\r\n    this.tabsTrigger.forEach((trigger) => {\r\n      if (trigger.dataset.tabId === tabId) trigger.classList.add(this.options.activeClass);\r\n      if (trigger.dataset.tabId !== tabId) trigger.classList.remove(this.options.activeClass);\r\n    });\r\n\r\n    this.tabsContent.forEach((content) => {\r\n      if (content.dataset.tabId === tabId) content.classList.add(this.options.activeClass);\r\n      if (content.dataset.tabId !== tabId) content.classList.remove(this.options.activeClass);\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.tabsTrigger.forEach((trigger) => {\r\n      trigger.addEventListener('click', () => this.update(trigger.dataset.tabId));\r\n    });\r\n\r\n    this.update(this.tabsTrigger[0].dataset.tabId);\r\n  }\r\n}\r\n\r\nclass Album {\r\n  constructor() {\r\n    this.albumRoot = document.querySelector('.js-get-album-photo');\r\n    this.sliderRoot = document.querySelector('.js-get-slider-photo');\r\n    this.albumImages = '';\r\n    this.sliderImages = '';\r\n    this.loacation = location;\r\n\r\n    if (this.albumRoot || this.sliderRoot) this.init();\r\n  }\r\n\r\n  async get(url) {\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: { 'Content-type': 'application/json' },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Could not fetch data. URL: ${this.loacation}/photo, State: ${response.status}.`);\r\n      } else {\r\n        return await response.json();\r\n      }\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  init() {\r\n    const url = this.loacation;\r\n    const album = this.albumRoot;\r\n    const slider = this.sliderRoot;\r\n\r\n    this.get(`${url}photo.php`)\r\n      .then((data) => {\r\n        data.forEach((img) => {\r\n          if (this.albumRoot)\r\n            this.albumImages += `<a class=\"section-album__link\" href=\"${url}photos/${img}\" ><img class=\"photo\" src=\"${url}photos/${img}\" alt=\"\"></a>`;\r\n          if (this.sliderRoot)\r\n            this.sliderImages += `<li class=\"splide__slide\"><img class=\"photo\" src=\"${url}photos/${img}\" alt=\"\" loading=\"lazy\"></li>`;\r\n        });\r\n        album.innerHTML = this.albumImages;\r\n\r\n        if (slider) {\r\n          slider.innerHTML = this.sliderImages;\r\n\r\n          const sliderAlbum = document.querySelector('#slider-album');\r\n\r\n          if (sliderAlbum) {\r\n            new Splide(sliderAlbum, {\r\n              type: 'slide',\r\n              gap: '20px',\r\n              pagination: false,\r\n            }).mount();\r\n          }\r\n        }\r\n      })\r\n      .catch(() => {\r\n        album.innerHTML = '<span class=\"album__message-error\">Не удалось загрузить альбом, попробуйте позже...</span>';\r\n      });\r\n  }\r\n}\r\n\r\nclass Popup {\r\n  constructor({ activeClass, onShow, onHide } = {}) {\r\n    this.popupRoot = document.querySelector('.js-popup');\r\n\r\n    if (this.popupRoot) {\r\n      this.popupTrigger = document.querySelectorAll(`.js-popup-trigger`);\r\n\r\n      this.options = {\r\n        activeClass: activeClass || 'is-active',\r\n        onShow: onShow || false,\r\n        onHide: onHide || false,\r\n      };\r\n\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  show(trigger) {\r\n    if (this.options.onShow) this.options.onShow(this.popupRoot, trigger);\r\n    this.popupRoot.classList.add(this.options.activeClass);\r\n\r\n    document.body.style['overflow'] = 'hidden';\r\n  }\r\n\r\n  hide(trigger) {\r\n    if (this.options.onHide) this.options.onHide(this.popupRoot, trigger);\r\n    this.popupRoot.classList.remove(this.options.activeClass);\r\n\r\n    document.body.style.removeProperty('overflow');\r\n  }\r\n\r\n  init() {\r\n    this.popupRoot.addEventListener('click', (e) => {\r\n      if (e.target === this.popupRoot) this.hide();\r\n    });\r\n\r\n    this.popupTrigger.forEach((trigger) => {\r\n      trigger.addEventListener('click', () => {\r\n        if (trigger.dataset.showPopup === this.popupRoot.id) this.show(trigger);\r\n        if (trigger.dataset.hidePopup === this.popupRoot.id) this.hide(trigger);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  new Menu();\r\n  new Album();\r\n\r\n  new Popup({\r\n    onHide: (modal) => {\r\n      modal.querySelector('#results-image').src = '#';\r\n      modal.querySelector('#results-pilot').innerHTML = '#';\r\n      modal.querySelector('#results-num').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-1').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-2').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-3').innerHTML = '#';\r\n      modal.querySelector('#results-time-total').innerHTML = '#';\r\n      modal.querySelector('#result-front-axle').innerHTML = '#';\r\n      modal.querySelector('#result-back-axle').innerHTML = '#';\r\n      modal.querySelector('#results-roll-cage').textContent = '#';\r\n    },\r\n    onShow: (modal, trigger) => {\r\n      const imageSrc = trigger.closest('.table__body-row').dataset.resultsImage;\r\n      const pilot = trigger.closest('.table__body-row').querySelector('[data-results-pilot]').innerHTML;\r\n      const num = trigger.closest('.table__body-row').querySelector('[data-results-num]').innerHTML;\r\n      const timeSu1 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-1]').innerHTML;\r\n      const timeSu2 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-2]').innerHTML;\r\n      const timeSu3 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-3]').innerHTML;\r\n      const timeTotal = trigger.closest('.table__body-row').querySelector('[data-results-time-total]').innerHTML;\r\n      const frontAxle = trigger.closest('.table__body-row').querySelector('[data-result-front-axle]').innerHTML;\r\n      const backAxle = trigger.closest('.table__body-row').querySelector('[data-result-back-axle]').innerHTML;\r\n      const rollCage = trigger.closest('.table__body-row').dataset.resultsRollCage;\r\n\r\n      modal.querySelector('#results-image').src = imageSrc;\r\n      modal.querySelector('#results-pilot').innerHTML = pilot;\r\n      modal.querySelector('#results-num').innerHTML = num;\r\n      modal.querySelector('#results-time-su-1').innerHTML = timeSu1;\r\n      modal.querySelector('#results-time-su-2').innerHTML = timeSu2;\r\n      modal.querySelector('#results-time-su-3').innerHTML = timeSu3;\r\n      modal.querySelector('#results-time-total').innerHTML = timeTotal;\r\n      modal.querySelector('#result-front-axle').innerHTML = frontAxle;\r\n      modal.querySelector('#result-back-axle').innerHTML = backAxle;\r\n      modal.querySelector('#results-roll-cage').textContent = rollCage;\r\n    },\r\n  });\r\n\r\n  document.querySelectorAll('.js-tabs').forEach((item) => new Tabs(item));\r\n});\r\n"]}