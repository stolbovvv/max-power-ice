{"version":3,"sources":["index.js"],"names":["Menu","constructor","this","menuWrapper","document","querySelector","menuTrigger","init","show","classList","remove","add","body","style","hide","removeProperty","toggle","contains","addEventListener","Tabs","element","activeClass","arguments","length","undefined","tabsRoot","tabsTrigger","querySelectorAll","tabsContent","options","update","bind","tabId","forEach","trigger","dataset","content","Album","albumRoot","sliderRoot","albumImages","sliderImages","loacation","location","get","url","response","fetch","method","headers","ok","json","Error","status","error","album","slider","then","data","img","innerHTML","sliderAlbum","Splide","type","gap","pagination","mount","catch","Popup","onShow","onHide","popupRoot","popupTrigger","e","target","showPopup","id","hidePopup","window","modal","src","textContent","imageSrc","closest","resultsImage","pilot","num","timeSu1","timeSu2","timeSu3","timeTotal","frontAxle","backAxle","rollCage","resultsRollCage","item"],"mappings":"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","file":"index.min.js","sourcesContent":["/* global Splide */\r\n\r\nclass Menu {\r\n  constructor() {\r\n    this.menuWrapper = document.querySelector('#js-menu-wrapper');\r\n    this.menuTrigger = document.querySelector('#js-menu-trigger');\r\n\r\n    if (this.menuWrapper && this.menuTrigger) {\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  show() {\r\n    this.menuWrapper.classList.remove('is-hide');\r\n    this.menuWrapper.classList.add('is-show');\r\n    this.menuTrigger.classList.add('is-open');\r\n\r\n    document.body.style['overflow'] = 'hidden';\r\n  }\r\n\r\n  hide() {\r\n    this.menuTrigger.classList.remove('is-open');\r\n    this.menuWrapper.classList.remove('is-show');\r\n    this.menuWrapper.classList.add('is-hide');\r\n\r\n    document.body.style.removeProperty('overflow');\r\n  }\r\n\r\n  toggle() {\r\n    if (this.menuTrigger.classList.contains('is-open')) {\r\n      this.hide();\r\n    } else {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.menuTrigger.addEventListener('click', () => this.toggle());\r\n  }\r\n}\r\n\r\nclass Tabs {\r\n  constructor(element, { activeClass } = {}) {\r\n    this.tabsRoot = typeof element === 'string' ? document.querySelector(element) : element;\r\n\r\n    if (this.tabsRoot) {\r\n      this.tabsTrigger = this.tabsRoot.querySelectorAll('.js-tabs-trigger');\r\n      this.tabsContent = this.tabsRoot.querySelectorAll('.js-tabs-content');\r\n\r\n      this.options = {\r\n        activeClass: activeClass || 'is-current',\r\n      };\r\n\r\n      this.update = this.update.bind(this);\r\n\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  update(tabId) {\r\n    this.tabsTrigger.forEach((trigger) => {\r\n      if (trigger.dataset.tabId === tabId) trigger.classList.add(this.options.activeClass);\r\n      if (trigger.dataset.tabId !== tabId) trigger.classList.remove(this.options.activeClass);\r\n    });\r\n\r\n    this.tabsContent.forEach((content) => {\r\n      if (content.dataset.tabId === tabId) content.classList.add(this.options.activeClass);\r\n      if (content.dataset.tabId !== tabId) content.classList.remove(this.options.activeClass);\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.tabsTrigger.forEach((trigger) => {\r\n      trigger.addEventListener('click', () => this.update(trigger.dataset.tabId));\r\n    });\r\n\r\n    this.update(this.tabsTrigger[0].dataset.tabId);\r\n  }\r\n}\r\n\r\nclass Album {\r\n  constructor() {\r\n    this.albumRoot = document.querySelector('.js-get-album-photo');\r\n    this.sliderRoot = document.querySelector('.js-get-slider-photo');\r\n    this.albumImages = '';\r\n    this.sliderImages = '';\r\n    this.loacation = location;\r\n\r\n    if (this.albumRoot || this.sliderRoot) this.init();\r\n  }\r\n\r\n  async get(url) {\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: { 'Content-type': 'application/json' },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Could not fetch data. URL: ${this.loacation}/photo, State: ${response.status}.`);\r\n      } else {\r\n        return await response.json();\r\n      }\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  init() {\r\n    const url = this.loacation;\r\n    const album = this.albumRoot;\r\n    const slider = this.sliderRoot;\r\n\r\n    // this.get(`${url}photo.php`)\r\n    this.get(`http://localhost:4321/src/media/album_name/photo.php`)\r\n      .then((data) => {\r\n        data.forEach((img) => {\r\n          if (this.albumRoot)\r\n            this.albumImages += `<a class=\"section-album__link\" href=\"${url}photos/${img}\" ><img class=\"photo\" src=\"${url}photos/${img}\" alt=\"\"></a>`;\r\n          if (this.sliderRoot)\r\n            this.sliderImages += `<li class=\"splide__slide\"><img class=\"photo\" src=\"${url}photos/${img}\" alt=\"\" loading=\"lazy\"></li>`;\r\n        });\r\n        album.innerHTML = this.albumImages;\r\n\r\n        if (slider) {\r\n          slider.innerHTML = this.sliderImages;\r\n\r\n          const sliderAlbum = document.querySelector('#slider-album');\r\n\r\n          if (sliderAlbum) {\r\n            new Splide(sliderAlbum, {\r\n              type: 'slide',\r\n              gap: '20px',\r\n              pagination: false,\r\n            }).mount();\r\n          }\r\n        }\r\n      })\r\n      .catch(() => {\r\n        album.innerHTML = '<span class=\"album__message-error\">Не удалось загрузить альбом, попробуйте позже...</span>';\r\n      });\r\n  }\r\n}\r\n\r\nclass Popup {\r\n  constructor({ activeClass, onShow, onHide } = {}) {\r\n    this.popupRoot = document.querySelector('.js-popup');\r\n\r\n    if (this.popupRoot) {\r\n      this.popupTrigger = document.querySelectorAll(`.js-popup-trigger`);\r\n\r\n      this.options = {\r\n        activeClass: activeClass || 'is-active',\r\n        onShow: onShow || false,\r\n        onHide: onHide || false,\r\n      };\r\n\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  show(trigger) {\r\n    if (this.options.onShow) this.options.onShow(this.popupRoot, trigger);\r\n    this.popupRoot.classList.add(this.options.activeClass);\r\n\r\n    document.body.style['overflow'] = 'hidden';\r\n  }\r\n\r\n  hide(trigger) {\r\n    if (this.options.onHide) this.options.onHide(this.popupRoot, trigger);\r\n    this.popupRoot.classList.remove(this.options.activeClass);\r\n\r\n    document.body.style.removeProperty('overflow');\r\n  }\r\n\r\n  init() {\r\n    this.popupRoot.addEventListener('click', (e) => {\r\n      if (e.target === this.popupRoot) this.hide();\r\n    });\r\n\r\n    this.popupTrigger.forEach((trigger) => {\r\n      trigger.addEventListener('click', () => {\r\n        if (trigger.dataset.showPopup === this.popupRoot.id) this.show(trigger);\r\n        if (trigger.dataset.hidePopup === this.popupRoot.id) this.hide(trigger);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  new Menu();\r\n  new Album();\r\n\r\n  new Popup({\r\n    onHide: (modal) => {\r\n      modal.querySelector('#results-image').src = '#';\r\n      modal.querySelector('#results-pilot').innerHTML = '#';\r\n      modal.querySelector('#results-num').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-1').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-2').innerHTML = '#';\r\n      modal.querySelector('#results-time-su-3').innerHTML = '#';\r\n      modal.querySelector('#results-time-total').innerHTML = '#';\r\n      modal.querySelector('#result-front-axle').innerHTML = '#';\r\n      modal.querySelector('#result-back-axle').innerHTML = '#';\r\n      modal.querySelector('#results-roll-cage').textContent = '#';\r\n    },\r\n    onShow: (modal, trigger) => {\r\n      const imageSrc = trigger.closest('.table__body-row').dataset.resultsImage;\r\n      const pilot = trigger.closest('.table__body-row').querySelector('[data-results-pilot]').innerHTML;\r\n      const num = trigger.closest('.table__body-row').querySelector('[data-results-num]').innerHTML;\r\n      const timeSu1 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-1]').innerHTML;\r\n      const timeSu2 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-2]').innerHTML;\r\n      const timeSu3 = trigger.closest('.table__body-row').querySelector('[data-results-time-su-3]').innerHTML;\r\n      const timeTotal = trigger.closest('.table__body-row').querySelector('[data-results-time-total]').innerHTML;\r\n      const frontAxle = trigger.closest('.table__body-row').querySelector('[data-result-front-axle]').innerHTML;\r\n      const backAxle = trigger.closest('.table__body-row').querySelector('[data-result-back-axle]').innerHTML;\r\n      const rollCage = trigger.closest('.table__body-row').dataset.resultsRollCage;\r\n\r\n      modal.querySelector('#results-image').src = imageSrc;\r\n      modal.querySelector('#results-pilot').innerHTML = pilot;\r\n      modal.querySelector('#results-num').innerHTML = num;\r\n      modal.querySelector('#results-time-su-1').innerHTML = timeSu1;\r\n      modal.querySelector('#results-time-su-2').innerHTML = timeSu2;\r\n      modal.querySelector('#results-time-su-3').innerHTML = timeSu3;\r\n      modal.querySelector('#results-time-total').innerHTML = timeTotal;\r\n      modal.querySelector('#result-front-axle').innerHTML = frontAxle;\r\n      modal.querySelector('#result-back-axle').innerHTML = backAxle;\r\n      modal.querySelector('#results-roll-cage').textContent = rollCage;\r\n    },\r\n  });\r\n\r\n  document.querySelectorAll('.js-tabs').forEach((item) => new Tabs(item));\r\n});\r\n"]}