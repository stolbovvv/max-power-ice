"use strict";class Menu{constructor(){this.menuWrapper=document.querySelector("#js-menu-wrapper"),this.menuTrigger=document.querySelector("#js-menu-trigger"),this.menuWrapper&&this.menuTrigger&&this.init()}show(){this.menuWrapper.classList.remove("is-hide"),this.menuWrapper.classList.add("is-show"),this.menuTrigger.classList.add("is-open"),document.body.style.overflow="hidden"}hide(){this.menuTrigger.classList.remove("is-open"),this.menuWrapper.classList.remove("is-show"),this.menuWrapper.classList.add("is-hide"),document.body.style.removeProperty("overflow")}toggle(){this.menuTrigger.classList.contains("is-open")?this.hide():this.show()}init(){this.menuTrigger.addEventListener("click",(()=>this.toggle()))}}class Tabs{constructor(element){let{activeClass:activeClass}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tabsRoot="string"==typeof element?document.querySelector(element):element,this.tabsRoot&&(this.tabsTrigger=this.tabsRoot.querySelectorAll(".js-tabs-trigger"),this.tabsContent=this.tabsRoot.querySelectorAll(".js-tabs-content"),this.options={activeClass:activeClass||"is-current"},this.update=this.update.bind(this),this.init())}update(tabId){this.tabsTrigger.forEach((trigger=>{trigger.dataset.tabId===tabId&&trigger.classList.add(this.options.activeClass),trigger.dataset.tabId!==tabId&&trigger.classList.remove(this.options.activeClass)})),this.tabsContent.forEach((content=>{content.dataset.tabId===tabId&&content.classList.add(this.options.activeClass),content.dataset.tabId!==tabId&&content.classList.remove(this.options.activeClass)}))}init(){this.tabsTrigger.forEach((trigger=>{trigger.addEventListener("click",(()=>this.update(trigger.dataset.tabId)))})),this.update(this.tabsTrigger[0].dataset.tabId)}}class Album{constructor(){this.albumRoot=document.querySelector(".js-get-album-photo"),this.sliderRoot=document.querySelector(".js-get-slider-photo"),this.albumImages="",this.sliderImages="",this.loacation=location,(this.albumRoot||this.sliderRoot)&&this.init()}async get(url){try{const response=await fetch(url,{method:"GET",headers:{"Content-type":"application/json"}});if(response.ok)return await response.json();throw new Error(`Could not fetch data. URL: ${this.loacation}/photo, State: ${response.status}.`)}catch(error){throw new Error(error)}}init(){const url=this.loacation,album=this.albumRoot,slider=this.sliderRoot;this.get("http://localhost:4321/src/media/album_name/photo.php").then((data=>{if(data.forEach((img=>{this.albumRoot&&(this.albumImages+=`<a class="section-album__link" href="${url}photos/${img}" ><img class="photo" src="${url}photos/${img}" alt=""></a>`),this.sliderRoot&&(this.sliderImages+=`<li class="splide__slide"><img class="photo" src="${url}photos/${img}" alt="" loading="lazy"></li>`)})),album.innerHTML=this.albumImages,slider){slider.innerHTML=this.sliderImages;const sliderAlbum=document.querySelector("#slider-album");sliderAlbum&&new Splide(sliderAlbum,{type:"slide",gap:"20px",pagination:!1}).mount()}})).catch((()=>{album.innerHTML='<span class="album__message-error">Не удалось загрузить альбом, попробуйте позже...</span>'}))}}class Popup{constructor(){let{activeClass:activeClass,onShow:onShow,onHide:onHide}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.popupRoot=document.querySelector(".js-popup"),this.popupRoot&&(this.popupTrigger=document.querySelectorAll(".js-popup-trigger"),this.options={activeClass:activeClass||"is-active",onShow:onShow||!1,onHide:onHide||!1},this.init())}show(trigger){this.options.onShow&&this.options.onShow(this.popupRoot,trigger),this.popupRoot.classList.add(this.options.activeClass),document.body.style.overflow="hidden"}hide(trigger){this.options.onHide&&this.options.onHide(this.popupRoot,trigger),this.popupRoot.classList.remove(this.options.activeClass),document.body.style.removeProperty("overflow")}init(){this.popupRoot.addEventListener("click",(e=>{e.target===this.popupRoot&&this.hide()})),this.popupTrigger.forEach((trigger=>{trigger.addEventListener("click",(()=>{trigger.dataset.showPopup===this.popupRoot.id&&this.show(trigger),trigger.dataset.hidePopup===this.popupRoot.id&&this.hide(trigger)}))}))}}window.addEventListener("DOMContentLoaded",(()=>{new Menu,new Album,new Popup({onHide:modal=>{modal.querySelector("#results-image").src="#",modal.querySelector("#results-pilot").innerHTML="#",modal.querySelector("#results-num").innerHTML="#",modal.querySelector("#results-time-su-1").innerHTML="#",modal.querySelector("#results-time-su-2").innerHTML="#",modal.querySelector("#results-time-su-3").innerHTML="#",modal.querySelector("#results-time-total").innerHTML="#",modal.querySelector("#result-front-axle").innerHTML="#",modal.querySelector("#result-back-axle").innerHTML="#",modal.querySelector("#results-roll-cage").textContent="#"},onShow:(modal,trigger)=>{const imageSrc=trigger.closest(".table__body-row").dataset.resultsImage,pilot=trigger.closest(".table__body-row").querySelector("[data-results-pilot]").innerHTML,num=trigger.closest(".table__body-row").querySelector("[data-results-num]").innerHTML,timeSu1=trigger.closest(".table__body-row").querySelector("[data-results-time-su-1]").innerHTML,timeSu2=trigger.closest(".table__body-row").querySelector("[data-results-time-su-2]").innerHTML,timeSu3=trigger.closest(".table__body-row").querySelector("[data-results-time-su-3]").innerHTML,timeTotal=trigger.closest(".table__body-row").querySelector("[data-results-time-total]").innerHTML,frontAxle=trigger.closest(".table__body-row").querySelector("[data-result-front-axle]").innerHTML,backAxle=trigger.closest(".table__body-row").querySelector("[data-result-back-axle]").innerHTML,rollCage=trigger.closest(".table__body-row").dataset.resultsRollCage;modal.querySelector("#results-image").src=imageSrc,modal.querySelector("#results-pilot").innerHTML=pilot,modal.querySelector("#results-num").innerHTML=num,modal.querySelector("#results-time-su-1").innerHTML=timeSu1,modal.querySelector("#results-time-su-2").innerHTML=timeSu2,modal.querySelector("#results-time-su-3").innerHTML=timeSu3,modal.querySelector("#results-time-total").innerHTML=timeTotal,modal.querySelector("#result-front-axle").innerHTML=frontAxle,modal.querySelector("#result-back-axle").innerHTML=backAxle,modal.querySelector("#results-roll-cage").textContent=rollCage}}),document.querySelectorAll(".js-tabs").forEach((item=>new Tabs(item)))}));
//# sourceMappingURL=index.min.js.map